import os
from openai import OpenAI
from dotenv import load_dotenv

load_dotenv()
client = OpenAI(api_key=os.getenv('OPENAI_API_KEY'))

def prompt_weather():
    """날씨 정보 질문에 대한 개선된 프롬프트 실험"""
    
    # 더 명확하고 구체적인 프롬프트로 개선
    # prompt = "이번 주 서울의 일반적인 날씨 경향과, 신뢰할 수 있는 날씨 정보를 확인할 수 있는 방법을 알려주세요."
    # → 04, 05 실행 결과 일반적인 대답을 내놓는 것으로 보아 **이번주**가 언제인지 정확히 언제인지 모르는 듯 하여 날짜도 지정하기로 함
    prompt = "2025년 8월 5일부터 8월 11일까지 서울의 일반적인 날씨 경향과, 신뢰할 수 있는 날씨 정보를 확인할 수 있는 방법을 알려주세요."
    
    system_message = {
        "role": "system",
        "content": (
            "실시간 정보는 제공할 수 없으나, 지역과 계절 정보를 바탕으로 일반적인 날씨 패턴을 설명해 주세요. "
            "또한, 신뢰할 수 있는 기상청 사이트나 앱을 통한 정보 확인 방법도 포함해 주세요."
        )
    }

    messages = [system_message, {"role": "user", "content": prompt}]

    try:
        response = client.chat.completions.create(
            model="gpt-4o-mini",
            messages=messages,
            max_tokens=500,                                         # 패턴, 방법을 프롬프트에 추가했으므로 max_tokens도 늘림 
            temperature=0.5
        )

        print("[프롬프트]:", prompt)
        print("[응답]:", response.choices[0].message.content)

    except Exception as e:
        print("오류 발생:", str(e))

if __name__ == "__main__":
    prompt_weather()


"""
    - 셀 출력
        [프롬프트]: 2025년 8월 5일부터 8월 11일까지 서울의 일반적인 날씨 경향과, 신뢰할 수 있는 날씨 정보를 확인할 수 있는 방법을 알려주세요.
        [응답]: 2025년 8월 5일부터 8월 11일까지 서울의 날씨는 일반적으로 여름철의 특징을 보일 것으로 예상됩니다. 이 시기는 서울에서 가장 더운 시기 중 하나로, 평균 기온은 25도에서 35도 사이에 있을 가능성이 높습니다. 또한, 이 시기에는 장마가 끝난 후 습도가 높고, 가끔씩 소나기가 내릴 수 있습니다. 특히, 오후나 저녁 시간대에 뇌우가 발생할 가능성도 있으니 주의가 필요합니다.

        서울의 여름 날씨는 다음과 같은 특징이 있습니다:
            **기온**: 낮에는 덥고, 밤에는 상대적으로 시원할 수 있습니다.
            **습도**: 높은 습도로 인해 체감 온도가 더 높게 느껴질 수 있습니다.
            **강수**: 소나기나 뇌우가 발생할 가능성이 있으므로, 우산을 준비하는 것이 좋습니다.

        신뢰할 수 있는 날씨 정보를 확인하는 방법은 다음과 같습니다:

            1. **기상청 웹사이트**: 대한민국 기상청의 공식 웹사이트인 [KMA](https://www.kma.go.kr)에서 서울 및 기타 지역의 최신 날씨 정보를 확인할 수 있습니다. 기상청은 정확한 예보와 기상 특보를 제공합니다.

            2. **모바일 앱**: 기상청의 공식 앱이나 '날씨' 관련 앱(예: AccuWeather, Weather.com 등)을 다운로드하여 실시간 날씨 정보를 확인할 수 있습니다.

            3. **뉴스 및 방송**: TV 뉴스나 라디오 방송에서도 정기적으로 날씨 예보를 제공하므로 참고할 수 있습니다.

        이러한 방법들을 통해 2025년 8월의 서울 날씨에 대한 정보를 미리 준비하고, 필요한 대비를 할 수 있습니다.

"""